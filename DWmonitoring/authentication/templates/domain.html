{% extends 'base.html' %}
{% block title %}Domain{% endblock title %}

{% block content %}
<div class="mx-4 my-4">
  <div class="flex flex-col md:flex-row space-y-6 md:space-x-6 md:space-y-0 mb-6">
    <div class="flex-1 shadow-lg bg-white p-6 rounded-lg border-custom">
      <h2 class="text-2xl mb-2 text-center">Domain</h2>
      <div class="flex justify-between items-center">
        <div>
          <p class="text-5xl font-bold">78</p>
          <p>Domain breaches</p>
        </div>
        <div>
          <p class="text-5xl font-bold">500</p>
          <p>Total Domain</p>
        </div>
      </div>
    </div> 
        <div id="breachDetails"
          class="flex-1 bg-white shadow-lg p-6 rounded-lg border-custom flex flex-col items-center">
          <div>
            <select id="domainSelect"
              class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg shadow-sm">
              <option value="example.com">example.com</option>
              <option value="example1.com">example1.com</option>
              <option value="example2.com">example2.com</option>
              <option value="example3.com">example3.com</option>
            </select>
          </div>
          <p class="text-xl font-bold">Data Leak Source</p>
          <div class="flex space-x-6">
            <div class="bg-red-600 text-white w-28 h-28 flex items-center justify-center rounded-full my-4">
              <p class="text-2xl font-bold" id="breachCount">4</p>
            </div>
           <div class="py-7">
            <ul class="text-center" id="breachList">
              <li>120 Telegram.org</li>
              <li>12 Telegram.org</li>
              <li>34 Telegram.org</li>
              <li>45 Telegram.org</li>
            </ul>
           </div>
          </div>
        </div>
  </div>
  <div class="overflow-x-auto">
    <div class="shadow rounded border border-gray-200">
      <table class="min-w-full bg-white">
        <thead class="bg-gray-800 text-white">
          <tr>
            <th class="px-4 py-3 text-left uppercase font-semibold text-sm" rowspan="2">Name</th>
            <th class="px-4 py-3 text-left uppercase font-semibold text-sm" rowspan="2">IP</th>
            <th class="px-4 py-3 text-left uppercase font-semibold text-sm" rowspan="2">Severity Level</th>
            <th class="px-4 py-3 text-center uppercase font-semibold text-sm" colspan="2">Sources</th>
            <th class="w-1/5 px-4 py-3 text-left uppercase font-semibold text-sm" rowspan="2">Comment/Summary/Key Notes
            </th>
          </tr>
          <tr>
            <th class="px-4 py-3 text-center uppercase font-semibold text-sm">IP</th>
            <th class="px-4 py-3 text-center uppercase font-semibold text-sm">Domain</th>
          </tr>
        </thead>
        <tbody class="text-gray-700">
          <tr>
            <td class="px-4 py-3 text-left">Abc R</td>
            <td class="px-4 py-3 text-left">192....</td>
            <td class="px-4 py-3 text-left">Medium</td>
            <td class="px-4 py-3 text-center">192.168.1.1</td>
            <td class="px-4 py-3 text-center">example.com</td>
            <td class="px-4 py-3 flex items-center"><textarea
                class="border rounded px-2 py-1 w-full mr-2 resize-none"></textarea><button
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save</button></td>
          </tr>
          <tr>
            <td class="px-4 py-3 text-left">Joe Rg</td>
            <td class="px-4 py-3 text-left">123.22...</td>
            <td class="px-4 py-3 text-left">Medium</td>
            <td class="px-4 py-3 text-center">10.0.0.1</td>
            <td class="px-4 py-3 text-center">example.org</td>
            <td class="px-4 py-3 flex items-center"><textarea
                class="border rounded px-2 py-1 w-full mr-2 resize-none"></textarea><button
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  const breachData = {
    "example.com": {
      count: 4,
      sources: ["120 Telegram.org", "12 Telegram.org", "34 Telegram.org", "45 Telegram.org"]
    },
    "example1.com": {
      count: 3,
      sources: ["50 Example1.org", "30 Example1.org", "20 Example1.org"]
    },
    "example2.com": {
      count: 5,
      sources: ["90 Example2.org", "70 Example2.org", "60 Example2.org", "40 Example2.org", "10 Example2.org"]
    },
    "example3.com": {
      count: 2,
      sources: ["15 Example3.org", "5 Example3.org"]
    }
  };

  document.getElementById('domainSelect').addEventListener('change', function () {
    const selectedDomain = this.value;
    const breachInfo = breachData[selectedDomain];

    document.getElementById('breachCount').textContent = breachInfo.count;
    const breachList = document.getElementById('breachList');
    breachList.innerHTML = '';
    breachInfo.sources.forEach(source => {
      const listItem = document.createElement('li');
      listItem.textContent = source;
      breachList.appendChild(listItem);
    });
  });
</script>
{% endblock content %}